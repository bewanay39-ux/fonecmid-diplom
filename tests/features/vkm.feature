# language: ru

Функционал: ВКМ - Полный сценарий заявки клиента
  Проверяем: создание заявки -> смена статусов -> запись истории статусов.

Контекст:
  Дано Я запускаю сценарий открытия TestClient или подключаю уже открытый
  И Я закрываю все окна клиентского приложения

Сценарий: Создание заявки и прохождение статусов с проверкой истории

  # 1) Открываем список заявок
  Когда В командном интерфейсе я выбираю "ВКМ_РаботаСЗаявкамиКлиентов" "ВКМ_ЗаявкаКлиента"
  Тогда открылось окно "ВКМ_ЗаявкаКлиента"

  # 2) Создаём новую заявку
  И я нажимаю на кнопку с именем 'ФормаСоздать'
  Тогда открылось окно "ВКМ_ЗаявкаКлиента (создание)"

  # 3) Заполняем реквизиты (в демобазе должны быть ТестКлиент/ТестСотрудник)
  И в поле с именем 'ВКМ_Клиент' я выбираю точное значение "ТестКлиент"
  И в поле с именем 'ВКМ_ОписаниеПроблемы' я ввожу текст "Автотест: не включается компьютер"
  И в поле с именем 'ВКМ_Ответственный' я выбираю точное значение "ТестСотрудник"

  # 4) Записываем — должен быть статус "Новая"
  И я нажимаю на кнопку с именем 'ФормаЗаписать'
  Тогда элемент формы с именем 'ВКМ_Статус' стал равен "Новая"

  # 5) Меняем статусы (кнопки на форме должны иметь такие имена элементов)
  И я нажимаю на кнопку с именем 'ВКМ_ВзятьВРаботу'
  Тогда элемент формы с именем 'ВКМ_Статус' стал равен "ВРаботе"

  И я нажимаю на кнопку с именем 'ВКМ_ОтметитьВыполненной'
  Тогда элемент формы с именем 'ВКМ_Статус' стал равен "Выполнена"

  И я нажимаю на кнопку с именем 'ВКМ_Закрыть'
  Тогда элемент формы с именем 'ВКМ_Статус' стал равен "Закрыта"

  # 6) Открываем историю статусов (кнопка на командной панели)
  И я нажимаю на кнопку с именем 'ВКМ_ИсторияСтатусов'
  Тогда открылось окно "ВКМ_ИсторияСтатусовЗаявок"

  # 7) Проверяем, что записи есть (обычно 4 записи по статусам)
  И в таблице "Список" количество строк "больше или равно" 4

  # 8) Проверяем, что среди записей встречаются нужные статусы (проверка по подстроке в таблице)
  И в таблице "Список" я перехожу к строке содержащей текст "Новая"
  И в таблице "Список" я перехожу к строке содержащей текст "ВРаботе"
  И в таблице "Список" я перехожу к строке содержащей текст "Выполнена"
  И в таблице "Список" я перехожу к строке содержащей текст "Закрыта"

  И Я закрываю все окна клиентского приложения
